Development Containers
======================

Development Containers (/)‚Ä¢ Overview
‚Ä¢ Reference
‚Ä¢ Specification
‚Ä¢ Supporting Tools
‚Ä¢ Guides
‚Ä¢ Available Features
‚Ä¢ Available Templates
‚Ä¢ Collections
‚Ä¢ Specification
‚Ä¢ Reference Implementation
‚Ä¢ devcontainer.json schema
‚Ä¢ Dev Container metadata reference
‚Ä¢ Features
‚Ä¢ Features distribution
‚Ä¢ Templates
‚Ä¢ Templates distribution
‚Ä¢ Contributing
Specification

Dev Container metadata reference
--------------------------------
The devcontainer.json file contains any needed metadata and settings required to configure a development container for a given well-defined tool and runtime stack. It can be used by tools and services that support the dev container spec to create a development environment that contains one or more development containers.

Metadata properties marked with a üè∑Ô∏èÔ∏è can be stored in the devcontainer.metadata container image label in addition to devcontainer.json. This label can contain an array of json snippets that will be automatically merged with devcontainer.json contents (if any) when a container is created.


General devcontainer.json properties
------------------------------------
Property
Type
Description
[‰ª£Á†Å]
name
[/‰ª£Á†Å]
string
A name for the dev container displayed in the UI.
[‰ª£Á†Å]
forwardPorts
[/‰ª£Á†Å]
üè∑Ô∏è
array
An array of port numbers or
[‰ª£Á†Å]
"host:port"
[/‰ª£Á†Å]
values (e.g.
[‰ª£Á†Å]
[3000, "db:5432"]
[/‰ª£Á†Å]
) that should always be forwarded from inside the primary container to the local machine (including on the web). The property is most useful for forwarding ports that cannot be auto-forwarded because the related process that starts before the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting service / tool connects or for forwarding a service not in the primary container in Docker Compose scenarios (e.g.
[‰ª£Á†Å]
"db:5432"
[/‰ª£Á†Å]
). Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
portsAttributes
[/‰ª£Á†Å]
üè∑Ô∏è
object
Object that maps a port number,
[‰ª£Á†Å]
"host:port"
[/‰ª£Á†Å]
value, range, or regular expression to a set of default options. See
port attributes (#port-attributes)for available options. For example:

[‰ª£Á†Å]
"portsAttributes": {"3000": {"label": "Application port"}}
[/‰ª£Á†Å]
[‰ª£Á†Å]
otherPortsAttributes
[/‰ª£Á†Å]
üè∑Ô∏è
object
Default options for ports, port ranges, and hosts that aren‚Äôt configured using
[‰ª£Á†Å]
portsAttributes
[/‰ª£Á†Å]
. See
port attributes (#port-attributes)for available options. For example:

[‰ª£Á†Å]
"otherPortsAttributes": {"onAutoForward": "silent"}
[/‰ª£Á†Å]
[‰ª£Á†Å]
containerEnv
[/‰ª£Á†Å]
üè∑Ô∏è
object
A set of name-value pairs that sets or overrides environment variables for the container. Environment and
pre-defined variables (#variables-in-devcontainerjson)may be referenced in the values. For example:

[‰ª£Á†Å]
"containerEnv": { "MY_VARIABLE": "${localEnv:MY_VARIABLE}" }
[/‰ª£Á†Å]

If you want to reference an existing container variable while setting this one (like updating the
[‰ª£Á†Å]
PATH
[/‰ª£Á†Å]
), use
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
instead.

[‰ª£Á†Å]
containerEnv
[/‰ª£Á†Å]
will set the variable on the Docker container itself, so all processes spawned in the container will have access to it. But it will also be static for the life of the container - you must rebuild the container to update the value.

We recommend using
[‰ª£Á†Å]
containerEnv
[/‰ª£Á†Å]
(over
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
) as much as possible since it allows all processes to see the variable and isn‚Äôt client-specific.
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
üè∑Ô∏è
object
A set of name-value pairs that sets or overrides environment variables for the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting service / tool (or sub-processes like terminals) but not the container as a whole. Environment and
pre-defined variables (#variables-in-devcontainerjson)may be referenced in the values.

You may want to use
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
(over
[‰ª£Á†Å]
containerEnv
[/‰ª£Á†Å]
) if the value isn‚Äôt static since you can update its value without having to rebuild the full container.
[‰ª£Á†Å]
remoteUser
[/‰ª£Á†Å]
üè∑Ô∏è
string
Overrides the user that
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services tools / runs as in the container (along with sub-processes like terminals, tasks, or debugging). Does not change the user the container as a whole runs as which can be set using
[‰ª£Á†Å]
containerUser
[/‰ª£Á†Å]
. Defaults to the user the container as a whole is running as (often
[‰ª£Á†Å]
root
[/‰ª£Á†Å]
).

You may learn more in the
remoteUser section below (#remoteUser).
[‰ª£Á†Å]
containerUser
[/‰ª£Á†Å]
üè∑Ô∏è
string
Overrides the user for all operations run as inside the container. Defaults to either
[‰ª£Á†Å]
root
[/‰ª£Á†Å]
or the last
[‰ª£Á†Å]
USER
[/‰ª£Á†Å]
instruction in the related Dockerfile used to create the image. If you want any connected tools or related processes to use a different user than the one for the container, see
[‰ª£Á†Å]
remoteUser
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
updateRemoteUserUID
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
On Linux, if
[‰ª£Á†Å]
containerUser
[/‰ª£Á†Å]
or
[‰ª£Á†Å]
remoteUser
[/‰ª£Á†Å]
is specified, the user‚Äôs UID/GID will be updated to match the local user‚Äôs UID/GID to avoid permission problems with bind mounts. Defaults to
[‰ª£Á†Å]
true
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
userEnvProbe
[/‰ª£Á†Å]
üè∑Ô∏è
enum
Indicates the type of shell to use to ‚Äúprobe‚Äù for user environment variables to include in
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services‚Äô / tools‚Äô processes:
[‰ª£Á†Å]
none
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
interactiveShell
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
loginShell
[/‰ª£Á†Å]
, or
[‰ª£Á†Å]
loginInteractiveShell
[/‰ª£Á†Å]
(default). The specific shell used is based on the default shell for the user (typically bash). For example, bash interactive shells will typically include variables set in
[‰ª£Á†Å]
/etc/bash.bashrc
[/‰ª£Á†Å]
and
[‰ª£Á†Å]
~/.bashrc
[/‰ª£Á†Å]
while login shells usually include variables from
[‰ª£Á†Å]
/etc/profile
[/‰ª£Á†Å]
and
[‰ª£Á†Å]
~/.profile
[/‰ª£Á†Å]
. Setting this property to
[‰ª£Á†Å]
loginInteractiveShell
[/‰ª£Á†Å]
will get variables from all four files.
[‰ª£Á†Å]
overrideCommand
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
Tells
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools whether they should run
[‰ª£Á†Å]
/bin/sh -c "while sleep 1000; do :; done"
[/‰ª£Á†Å]
when starting the container instead of the container‚Äôs default command (since the container can shut down if the default command fails). Set to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
if the default command must run for the container to function properly. Defaults to
[‰ª£Á†Å]
true
[/‰ª£Á†Å]
for when using an image Dockerfile and
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
when referencing a Docker Compose file.
[‰ª£Á†Å]
shutdownAction
[/‰ª£Á†Å]
üè∑Ô∏è
enum
Indicates whether
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting tools should stop the containers when the related tool window is closed / shut down.

Values are
[‰ª£Á†Å]
none
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
stopContainer
[/‰ª£Á†Å]
(default for image or Dockerfile), and
[‰ª£Á†Å]
stopCompose
[/‰ª£Á†Å]
(default for Docker Compose).
[‰ª£Á†Å]
init
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
Defaults to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
. Cross-orchestrator way to indicate whether the
tini init process (https://github.com/krallin/tini)should be used to help deal with zombie processes.
[‰ª£Á†Å]
privileged
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
Defaults to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
. Cross-orchestrator way to cause the container to run in privileged mode (
[‰ª£Á†Å]
--privileged
[/‰ª£Á†Å]
). Required for things like Docker-in-Docker, but has security implications particularly when running directly on Linux.
[‰ª£Á†Å]
capAdd
[/‰ª£Á†Å]
üè∑Ô∏è
array
Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
. Cross-orchestrator way to add capabilities typically disabled for a container. Most often used to add the
[‰ª£Á†Å]
ptrace
[/‰ª£Á†Å]
capability required to debug languages like C++, Go, and Rust. For example:

[‰ª£Á†Å]
"capAdd": ["SYS_PTRACE"]
[/‰ª£Á†Å]
[‰ª£Á†Å]
securityOpt
[/‰ª£Á†Å]
üè∑Ô∏è
array
Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
. Cross-orchestrator way to set container security options. For example:

[‰ª£Á†Å]
"securityOpt": [ "seccomp=unconfined" ]
[/‰ª£Á†Å]
[‰ª£Á†Å]
mounts
[/‰ª£Á†Å]
üè∑Ô∏è
string or object
Defaults to unset. Cross-orchestrator way to add additional mounts to a container. Each value is a string that accepts the same values as the
Docker CLI --mount flag (https://docs.docker.com/engine/reference/commandline/run/#mount). Environment and
pre-defined variables (#variables-in-devcontainerjson)may be referenced in the value. For example:

[‰ª£Á†Å]
"mounts": [{ "source": "dind-var-lib-docker", "target": "/var/lib/docker", "type": "volume" }]
[/‰ª£Á†Å]
[‰ª£Á†Å]
features
[/‰ª£Á†Å]
object
An object of
Dev Container Feature IDs (../../features)and related options to be added into your primary container. The specific options that are available varies by feature, so see its documentation for additional details. For example:

[‰ª£Á†Å]
"features": { "ghcr.io/devcontainers/features/github-cli": {} }
[/‰ª£Á†Å]
[‰ª£Á†Å]
overrideFeatureInstallOrder
[/‰ª£Á†Å]
array
By default, Features will attempt to automatically set the order they are installed based on a
[‰ª£Á†Å]
installsAfter
[/‰ª£Á†Å]
property within each of them. This property allows you to override the Feature install order when needed. For example:

[‰ª£Á†Å]
"overrideFeatureInstall–ûrder": [ "ghcr.io/devcontainers/features/common-utils", "ghcr.io/devcontainers/features/github-cli" ]
[/‰ª£Á†Å]
[‰ª£Á†Å]
customizations
[/‰ª£Á†Å]
üè∑Ô∏è
object
Product specific properties, defined in
supporting tools (../../supporting)
Scenario specific properties
----------------------------
The focus of devcontainer.json is to describe how to enrich a container for the purposes of development rather than acting as a multi-container orchestrator format. Instead, container orchestrator formats can be referenced when needed to manage multiple containers and their lifecycles. Today, devcontainer.json includes scenario specific properties for working without a container orchestrator (by directly referencing an image or Dockerfile) and for using Docker Compose as a simple multi-container orchestrator.


Image or Dockerfile specific properties
---------------------------------------
Property
Type
Description
[‰ª£Á†Å]
image
[/‰ª£Á†Å]
string
Required
when using an image. The name of an image in a container registry (
DockerHub (https://hub.docker.com),
GitHub Container Registry (https://docs.github.com/packages/guides/about-github-container-registry),
Azure Container Registry (https://azure.microsoft.com/services/container-registry/)) that
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools should use to create the dev container.
[‰ª£Á†Å]
build.dockerfile
[/‰ª£Á†Å]
string
Required
when using a Dockerfile. The location of a
Dockerfile (https://docs.docker.com/engine/reference/builder/)that defines the contents of the container. The path is relative to the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
file.
[‰ª£Á†Å]
build.context
[/‰ª£Á†Å]
string
Path that the Docker build should be run from relative to
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
. For example, a value of
[‰ª£Á†Å]
".."
[/‰ª£Á†Å]
would allow you to reference content in sibling directories. Defaults to
[‰ª£Á†Å]
"."
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
build.args
[/‰ª£Á†Å]
Object
A set of name-value pairs containing
Docker image build arguments (https://docs.docker.com/engine/reference/commandline/build/#build-arg)that should be passed when building a Dockerfile. Environment and
pre-defined variables (#variables-in-devcontainerjson)may be referenced in the values. Defaults to not set. For example:
[‰ª£Á†Å]
"build": { "args": { "MYARG": "MYVALUE", "MYARGFROMENVVAR": "${localEnv:VARIABLE_NAME}" } }
[/‰ª£Á†Å]
[‰ª£Á†Å]
build.options
[/‰ª£Á†Å]
array
An array of
Docker image build options (https://docs.docker.com/engine/reference/commandline/build/#options)that should be passed to the build command when building a Dockerfile. Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
. For example:
[‰ª£Á†Å]
"build": { "options": [ "--add-host=host.docker.internal:host-gateway" ] }
[/‰ª£Á†Å]
[‰ª£Á†Å]
build.target
[/‰ª£Á†Å]
string
A string that specifies a
Docker image build target (https://docs.docker.com/engine/reference/commandline/build/#target)that should be passed when building a Dockerfile. Defaults to not set. For example:
[‰ª£Á†Å]
"build": { "target": "development" }
[/‰ª£Á†Å]
[‰ª£Á†Å]
build.cacheFrom
[/‰ª£Á†Å]
string,

array
A string or array of strings that specify one or more images to use as caches when building the image. Cached image identifiers are passed to the
[‰ª£Á†Å]
docker build
[/‰ª£Á†Å]
command with
[‰ª£Á†Å]
--cache-from
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
appPort
[/‰ª£Á†Å]
integer,

string,

array
In most cases, we recommend using the new
forwardPorts property (#general-properties). This property accepts a port or array of ports that should be published locally when the container is running. Unlike
[‰ª£Á†Å]
forwardPorts
[/‰ª£Á†Å]
, your application may need to listen on all interfaces (
[‰ª£Á†Å]
0.0.0.0
[/‰ª£Á†Å]
) not just
[‰ª£Á†Å]
localhost
[/‰ª£Á†Å]
for it to be available externally. Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
.

Learn more about publishing vs forwarding ports
here (#publishing-vs-forwarding-ports).

Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array properties.
[‰ª£Á†Å]
workspaceMount
[/‰ª£Á†Å]
string
Requires
[‰ª£Á†Å]
workspaceFolder
[/‰ª£Á†Å]
be set as well. Overrides the default local mount point for the workspace when the container is created. Supports the same values as the
Docker CLI --mount flag (https://docs.docker.com/engine/reference/commandline/run/#mount). Environment and
pre-defined variables (#variables-in-devcontainerjson)may be referenced in the value. For example:

[‰ª£Á†Å]
"workspaceMount": "source=${localWorkspaceFolder}/sub-folder,target=/workspace,type=bind,consistency=cached", "workspaceFolder": "/workspace"
[/‰ª£Á†Å]
[‰ª£Á†Å]
workspaceFolder
[/‰ª£Á†Å]
string
Requires
[‰ª£Á†Å]
workspaceMount
[/‰ª£Á†Å]
be set. Sets the default path that
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools should open when connecting to the container. Defaults to the automatic source code mount location.
[‰ª£Á†Å]
runArgs
[/‰ª£Á†Å]
array
An array of
Docker CLI arguments (https://docs.docker.com/engine/reference/commandline/run/)that should be used when running the container. Defaults to
[‰ª£Á†Å]
[]
[/‰ª£Á†Å]
. For example, this allows ptrace based debuggers like C++ to work in the container:

[‰ª£Á†Å]
"runArgs": [ "--cap-add=SYS_PTRACE", "--security-opt", "seccomp=unconfined" ]
[/‰ª£Á†Å]
.

Docker Compose specific properties
----------------------------------
Property
Type
Description
[‰ª£Á†Å]
dockerComposeFile
[/‰ª£Á†Å]
string,

array
Required
when using
Docker Compose (https://docs.docker.com/compose/). Path or an ordered list of paths to Docker Compose files relative to the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
file. Using an array is useful
when extending your Docker Compose configuration (https://docs.docker.com/compose/extends/#multiple-compose-files). The order of the array matters since the contents of later files can override values set in previous ones.

The default
[‰ª£Á†Å]
.env
[/‰ª£Á†Å]
file is picked up from the root of the project, but you can use
[‰ª£Á†Å]
env_file
[/‰ª£Á†Å]
in your Docker Compose file to specify an alternate location.

Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array properties.
[‰ª£Á†Å]
service
[/‰ª£Á†Å]
string
Required
when using
Docker Compose (https://docs.docker.com/compose/). The name of the service
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools should connect to once running.
[‰ª£Á†Å]
runServices
[/‰ª£Á†Å]
array
An array of services in your Docker Compose configuration that should be started by
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools. These will also be stopped when you disconnect unless
[‰ª£Á†Å]
"shutdownAction"
[/‰ª£Á†Å]
is
[‰ª£Á†Å]
"none"
[/‰ª£Á†Å]
. Defaults to all services.
[‰ª£Á†Å]
workspaceFolder
[/‰ª£Á†Å]
string
Sets the default path that
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools should open when connecting to the container (which is often the path to a volume mount where the source code can be found in the container). Defaults to
[‰ª£Á†Å]
"/"
[/‰ª£Á†Å]
.

Tool-specific properties
------------------------
While most properties apply to any devcontainer.json supporting tool or service, a few are specific to certain tools. You may explore this in the supporting tools and services document.


Lifecycle scripts
-----------------
When creating or working with a dev container, you may need different commands to be run at different points in the container‚Äôs lifecycle. The table below lists a set of command properties you can use to update what the container‚Äôs contents in the order in which they are run (for example, onCreateCommand will run after initializeCommand). Each command property is an string or list of command arguments that should execute from the workspaceFolder.

Property
Type
Description
[‰ª£Á†Å]
initializeCommand
[/‰ª£Á†Å]
string,

array,

object
A command string or list of command arguments to run on the
host machine
during initialization, including during container creation and on subsequent starts. The command may run more than once during a given session.


‚ö†Ô∏è The command is run wherever the source code is located on the host. For cloud services, this is in the cloud.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
onCreateCommand
[/‰ª£Á†Å]
üè∑Ô∏è
string,

array,

object
This command is the first of three (along with
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
and
[‰ª£Á†Å]
postCreateCommand
[/‰ª£Á†Å]
) that finalizes container setup when a dev container is created. It and subsequent commands execute
inside
the container immediately after it has started for the first time.


Cloud services can use this command when caching or prebuilding a container. This means that it will not typically have access to user-scoped assets or secrets.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
üè∑Ô∏è
string,

array,

object
This command is the second of three that finalizes container setup when a dev container is created. It executes inside the container after
[‰ª£Á†Å]
onCreateCommand
[/‰ª£Á†Å]
whenever new content is available in the source tree during the creation process.


It will execute at least once, but cloud services will also periodically execute the command to refresh cached or prebuilt containers. Like cloud services using
[‰ª£Á†Å]
onCreateCommand
[/‰ª£Á†Å]
, it can only take advantage of repository and org scoped secrets or permissions.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
postCreateCommand
[/‰ª£Á†Å]
üè∑Ô∏è
string,

array,

object
This command is the last of three that finalizes container setup when a dev container is created. It happens after
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
and once the dev container has been assigned to a user for the first time.


Cloud services can use this command to take advantage of user specific secrets and permissions.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
postStartCommand
[/‰ª£Á†Å]
üè∑Ô∏è
string,

array,

object
A command to run each time the container is successfully started.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
postAttachCommand
[/‰ª£Á†Å]
üè∑Ô∏è
string,

array,

object
A command to run each time a tool has successfully attached to the container.


Note that the array syntax will execute the command without a shell. You can
learn more (#formatting-string-vs-array-properties)about formatting string vs array vs object properties.
[‰ª£Á†Å]
waitFor
[/‰ª£Á†Å]
üè∑Ô∏è
enum
An enum that specifies the command any tool should wait for before connecting. Defaults to
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
. This allows you to use
[‰ª£Á†Å]
onCreateCommand
[/‰ª£Á†Å]
or
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
for steps that must happen before
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting tools connect while still using
[‰ª£Á†Å]
postCreateCommand
[/‰ª£Á†Å]
for steps that can happen behind the scenes afterwards.
For each command property, if the value is a single string, it will be run in /bin/sh. Use && in a string to execute multiple commands. For example, "yarn install" or "apt-get update && apt-get install -y curl". The array syntax ["yarn", "install"] will invoke the command (in this case yarn) directly without using a shell. Each fires after your source code has been mounted, so you can also run shell scripts from your source tree. For example: bash scripts/install-dev-tools.sh.

If one of the lifecycle scripts fails, any subsequent scripts will not be executed. For instance, if postCreateCommand fails, postStartCommand and any following scripts will be skipped.


Minimum host requirements
-------------------------
While devcontainer.json does not focus on hardware or VM provisioning, it can be useful to know your container‚Äôs minimum RAM, CPU, and storage requirements. This is what the hostRequirements properties allow you to do. Cloud services can use these properties to automatically default to the best compute option available, while in other cases, you will be presented with a warning if the requirements are not met.

Property
Type
Description
[‰ª£Á†Å]
hostRequirements.cpus
[/‰ª£Á†Å]
üè∑Ô∏è
integer
Indicates the minimum required number of CPUs / virtual CPUs / cores. For example:
[‰ª£Á†Å]
"hostRequirements": {"cpus": 2}
[/‰ª£Á†Å]
[‰ª£Á†Å]
hostRequirements.memory
[/‰ª£Á†Å]
üè∑Ô∏è
string
A string indicating minimum memory requirements with a
[‰ª£Á†Å]
tb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
gb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
mb
[/‰ª£Á†Å]
, or
[‰ª£Á†Å]
kb
[/‰ª£Á†Å]
suffix. For example,
[‰ª£Á†Å]
"hostRequirements": {"memory": "4gb"}
[/‰ª£Á†Å]
[‰ª£Á†Å]
hostRequirements.storage
[/‰ª£Á†Å]
üè∑Ô∏è
string
A string indicating minimum storage requirements with a
[‰ª£Á†Å]
tb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
gb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
mb
[/‰ª£Á†Å]
, or
[‰ª£Á†Å]
kb
[/‰ª£Á†Å]
suffix. For example,
[‰ª£Á†Å]
"hostRequirements": {"storage": "32gb"}
[/‰ª£Á†Å]
[‰ª£Á†Å]
hostRequirements.gpu
[/‰ª£Á†Å]
üè∑Ô∏è
boolean,

string,

object
Indicates if any GPU is required. A boolean indicates if a GPU is required or not. The string
[‰ª£Á†Å]
"optional"
[/‰ª£Á†Å]
indicates that a GPU is used when available, but is not required.


The object syntax specifies how much GPU resources are required. The
[‰ª£Á†Å]
cores
[/‰ª£Á†Å]
property indicates the minimum number of cores and the
[‰ª£Á†Å]
memory
[/‰ª£Á†Å]
property indicates minimum storage requirements with a
[‰ª£Á†Å]
tb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
gb
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
mb
[/‰ª£Á†Å]
, or
[‰ª£Á†Å]
kb
[/‰ª£Á†Å]
suffix. For example,
[‰ª£Á†Å]
"gpu": { "cores": 1000, "storage": "32gb" }
[/‰ª£Á†Å]

Port attributes
---------------
The portsAttributes and otherPortsAttributes properties allow you to map default port options for one or more manually or automatically forwarded ports. The following is a list of options that can be set in the configuration object assigned to the property.

Property
Type
Description
[‰ª£Á†Å]
label
[/‰ª£Á†Å]
üè∑Ô∏è
string
Display name for the port in the ports view. Defaults to not set.
[‰ª£Á†Å]
protocol
[/‰ª£Á†Å]
üè∑Ô∏è
enum
Controls protocol handling for forwarded ports. When not set, the port is assumed to be a raw TCP stream which, if forwarded to
[‰ª£Á†Å]
localhost
[/‰ª£Á†Å]
, supports any number of protocols. However, if the port is forwarded to a web URL (e.g. from a cloud service on the web), only HTTP ports in the container are supported. Setting this property to
[‰ª£Á†Å]
https
[/‰ª£Á†Å]
alters handling by ignoring any SSL/TLS certificates present when communicating on the port and using the correct certificate for the forwarded URL instead (e.g
[‰ª£Á†Å]
https://*.githubpreview.dev
[/‰ª£Á†Å]
). If set to
[‰ª£Á†Å]
http
[/‰ª£Á†Å]
, processing is the same as if the protocol is not set. Defaults to not set.
[‰ª£Á†Å]
onAutoForward
[/‰ª£Á†Å]
üè∑Ô∏è
enum
Controls what should happen when a port is auto-forwarded once you‚Äôve connected to the container.
[‰ª£Á†Å]
notify
[/‰ª£Á†Å]
is the default, and a notification will appear when the port is auto-forwarded. If set to
[‰ª£Á†Å]
openBrowser
[/‰ª£Á†Å]
, the port will be opened in the system‚Äôs default browser. A value of
[‰ª£Á†Å]
openBrowserOnce
[/‰ª£Á†Å]
will open the browser only once.
[‰ª£Á†Å]
openPreview
[/‰ª£Á†Å]
will open the URL in
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services‚Äô / tools‚Äô embedded preview browser. A value of
[‰ª£Á†Å]
silent
[/‰ª£Á†Å]
will forward the port, but take no further action. A value of
[‰ª£Á†Å]
ignore
[/‰ª£Á†Å]
means that this port should not be auto-forwarded at all.
[‰ª£Á†Å]
requireLocalPort
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
Dictates when port forwarding is required to map the port in the container to the same port locally or not. If set to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
, the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools will attempt to use the specified port forward to
[‰ª£Á†Å]
localhost
[/‰ª£Á†Å]
, and silently map to a different one if it is unavailable. If set to
[‰ª£Á†Å]
true
[/‰ª£Á†Å]
, you will be notified if it is not possible to use the same port. Defaults to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
elevateIfNeeded
[/‰ª£Á†Å]
üè∑Ô∏è
boolean
Forwarding low ports like 22, 80, or 443 to
[‰ª£Á†Å]
localhost
[/‰ª£Á†Å]
on the same port from
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting services / tools may require elevated permissions on certain operating systems. Setting this property to
[‰ª£Á†Å]
true
[/‰ª£Á†Å]
will automatically try to elevate the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting tool‚Äôs permissions in this situation. Defaults to
[‰ª£Á†Å]
false
[/‰ª£Á†Å]
.

Formatting string vs. array properties
--------------------------------------
The format of certain properties will vary depending on the involvement of a shell.

postCreateCommand, postStartCommand, postAttachCommand, and initializeCommand all have 3 types:

‚Ä¢ Array: Passed to the OS for execution without going through a shell
‚Ä¢ String: Goes through a shell (it needs to be parsed into command and arguments)
‚Ä¢ Object: All lifecycle scripts have been extended to support object types to allow for parallel execution
runArgs only has the array type. Using runArgs via a typical command line, you‚Äôll need single quotes if the shell runs into parameters with spaces. However, these single quotes aren‚Äôt passed on to the executable. Thus, in your devcontainer.json, you‚Äôd follow the array format and leave out the single quotes:

[‰ª£Á†Å]
"runArgs": ["--device-cgroup-rule=my rule here"]
[/‰ª£Á†Å]
Rather than:

[‰ª£Á†Å]
"runArgs": ["--device-cgroup-rule='my rule here'"]
[/‰ª£Á†Å]
We can compare the string, array, and object versions of postAttachCommand as well. You can use the following string format, which will remove the single quotes as part of the shell‚Äôs parsing:

[‰ª£Á†Å]
"postAttachCommand": "echo foo='bar'"
[/‰ª£Á†Å]
By contrast, the array format will keep the single quotes and write them to standard out (you can see the output in the dev container log):

[‰ª£Á†Å]
"postAttachCommand": ["echo", "foo='bar'"]
[/‰ª£Á†Å]
Finally, you may use an object format:

[‰ª£Á†Å]
{
  "postAttachCommand": {
    "server": "npm start",
    "db": ["mysql", "-u", "root", "-p", "my database"]
  }
}
[/‰ª£Á†Å]

Variables in devcontainer.json
------------------------------
Variables can be referenced in certain string values in devcontainer.json in the following format: ${variableName}. The following is a list of available variables you can use.

Variable
Properties
Description
[‰ª£Á†Å]
${localEnv:VARIABLE_NAME}
[/‰ª£Á†Å]
Any
Value of an environment variable on the
host machine
(in the examples below, called
[‰ª£Á†Å]
VARIABLE_NAME
[/‰ª£Á†Å]
). Unset variables are left blank.


‚ö†Ô∏è Clients (like VS Code) may need to be
restarted
to pick up newly set variables.


‚ö†Ô∏è For a cloud service, the host is in the cloud rather than your local machine.


Examples


1.
Set a variable containing your local home folder on Linux / macOS or the user folder on Windows:

[‰ª£Á†Å]
"remoteEnv": { "LOCAL_USER_PATH": "${localEnv:HOME}${localEnv:USERPROFILE}" }
[/‰ª£Á†Å]
.


A default value for when the environment variable is not set can be given with
[‰ª£Á†Å]
${localEnv:VARIABLE_NAME:default_value}
[/‰ª£Á†Å]
.


2.
In modern versions of macOS, default configurations allow setting local variables with the command
[‰ª£Á†Å]
echo 'export VARIABLE_NAME=my-value' >> ~/.zshenv
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
${containerEnv:VARIABLE_NAME}
[/‰ª£Á†Å]
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
Value of an existing environment variable inside the container once it is up and running (in this case, called
[‰ª£Á†Å]
VARIABLE_NAME
[/‰ª£Á†Å]
). For example:

[‰ª£Á†Å]
"remoteEnv": { "PATH": "${containerEnv:PATH}:/some/other/path" }
[/‰ª£Á†Å]


A default value for when the environment variable is not set can be given with
[‰ª£Á†Å]
${containerEnv:VARIABLE_NAME:default_value}
[/‰ª£Á†Å]
.
[‰ª£Á†Å]
${localWorkspaceFolder}
[/‰ª£Á†Å]
Any
Path of the local folder that was opened in the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting service / tool (that contains
[‰ª£Á†Å]
.devcontainer/devcontainer.json
[/‰ª£Á†Å]
).
[‰ª£Á†Å]
${containerWorkspaceFolder}
[/‰ª£Á†Å]
Any
The path that the workspaces files can be found in the container.
[‰ª£Á†Å]
${localWorkspaceFolderBasename}
[/‰ª£Á†Å]
Any
Name of the local folder that was opened in the
[‰ª£Á†Å]
devcontainer.json
[/‰ª£Á†Å]
supporting service / tool (that contains
[‰ª£Á†Å]
.devcontainer/devcontainer.json
[/‰ª£Á†Å]
).
[‰ª£Á†Å]
${containerWorkspaceFolderBasename}
[/‰ª£Á†Å]
Any
Name of the folder where the workspace files can be found in the container.
[‰ª£Á†Å]
${devcontainerId}
[/‰ª£Á†Å]
Any
Allow Features to refer to an identifier that is unique to the dev container they are installed into and that is stable across rebuilds.

The properties supporting it in devcontainer.json are:
[‰ª£Á†Å]
name
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
runArgs
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
initializeCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
onCreateCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
updateContentCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
postCreateCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
postStartCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
postAttachCommand
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
workspaceFolder
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
workspaceMount
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
mounts
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
containerEnv
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
remoteEnv
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
containerUser
[/‰ª£Á†Å]
,
[‰ª£Á†Å]
remoteUser
[/‰ª£Á†Å]
, and
[‰ª£Á†Å]
customizations
[/‰ª£Á†Å]
.

Schema
------
You can see the dev container schema here.


Publishing vs forwarding ports
------------------------------
Docker has the concept of ‚Äúpublishing‚Äù ports when the container is created. Published ports behave very much like ports you make available to your local network. If your application only accepts calls from localhost, it will reject connections from published ports just as your local machine would for network calls. Forwarded ports, on the other hand, actually look like localhost to the application.


remoteUser
----------
A dev container configuration will inherit the remoteUser property from the base image it uses.

Using the images and Templates part of the spec as an example: remoteUser in these images is set to a custom value - you may view an example in the C++ image. The C++ Template will then inherit the custom remoteUser value from its base C++ image.
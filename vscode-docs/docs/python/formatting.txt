Formatting Python in VS Code
============================

Formatting Python in VS Code
Formatting makes source code easier to read by human beings. By enforcing particular rules and conventions such as line spacing, indents, and spacing around operators, the code becomes more visually organized and comprehensible. You can view an example on the autopep8 page. Keep in mind, formatting doesn't affect the functionality of the code itself.

Linting helps to prevent errors by analyzing code for common syntactical, stylistic, and functional errors and unconventional programming practices. Although there is a little overlap between formatting and linting, the two capabilities are complementary.


Choose a formatter
------------------
Search the VS Code Marketplace for the formatter extension of your choice.

Microsoft publishes the following formatting extensions:

Formatter
Extension
autopep8
https://marketplace.visualstudio.com/items?itemName=ms-python.autopep8 (https://marketplace.visualstudio.com/items?itemName=ms-python.autopep8)Black formatter
https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter (https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter)Formatter extensions offered by the community:

Formatter
Extension
Ruff
https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff (https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff)yapf
https://marketplace.visualstudio.com/items?itemName=eeyore.yapf (https://marketplace.visualstudio.com/items?itemName=eeyore.yapf)Furthermore, below are formatter extensions that support import sorting:

Formatter
Extension
Ruff
https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff (https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff)isort
https://marketplace.visualstudio.com/items?itemName=ms-python.isort (https://marketplace.visualstudio.com/items?itemName=ms-python.isort)Note: If you don't find your preferred formatter in the table above or in the Marketplace, you can add support for it via an extension. You can use the Python Extension Template to integrate new Python tools into VS Code.


Set a default formatter
-----------------------
Once you install a formatter extension, you can select it as the default formatter for Python files in VS Code by following the steps below:

• Open a Python file in VS Code.
• Right-click on the editor to display the context menu.
• Select Format Document With....
• Select Configure Default Formatter... from the drop-down menu.
• Select your preferred formatter extension from the list.
Alternatively, you can set it as the default formatter for all Python files by setting "editor.defaultFormatter" in your User settings.json file, under a [python] scope. You can open settings.json with the Preferences: Open User Settings (JSON) command.

For example, to set Black Formatter as the default formatter, add the following setting to your User settings.json file:

[代码]
"[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter"
  }
[/代码]
In order to set a formatter extension as an import sorter, you can set your preference under "editor.codeActionsOnSave" in your User settings.json file or your Workspace settings.json file, under a [python] scope. You can open these settings.json files using the Preferences: Open User Settings (JSON) and Preferences: Open Workspace Settings (JSON) commands respectively. This will enable import sorting on save for all Python files.

For example, to set Ruff as your preferred import sorter, you can add the following setting to your User settings.json or your Workspace settings.json file:

[代码]
{
  "[python]": {
    "editor.codeActionsOnSave": {
      "source.organizeImports.ruff": "explicit"
    }
  }
}
[/代码]

Format your code
----------------
You can format your code by right-clicking on the editor and selecting Format Document, or by using the ⇧⌥F (Windows Shift+Alt+F, Linux Ctrl+Shift+I) keyboard shortcut.

You can also add the following setting to your User settings.json file to enable formatting on save for your code:

[代码]
"[python]": {
    "editor.formatOnSave": true
  }
[/代码]

General formatting settings
---------------------------
You can refer to each formatter extension's README for more details on the supported settings. The following settings are supported by most formatter extensions:

Setting Suffix

Default value
Description
args
[代码]
[]
[/代码]
Arguments to be passed to the formatter. Each argument should be passed as a separate string in the array.

For example:

[代码]
black-formatter.args: ["--line-length", "100"]
[/代码]
importStrategy
[代码]
useBundled
[/代码]
When set to
[代码]
useBundled
[/代码]
, the extension uses the version of the tool that it ships with. When set to
[代码]
fromEnvironment
[/代码]
, it attempts to load from your selected Python environment first, otherwise it falls back to the bundled version.
path
[代码]
""
[/代码]
Path to the formatter binary to be used for formatting.
Note:
Using this option may slow down formatting.
interpreter
[代码]
[]
[/代码]
When set to a path to a Python executable, the extension will use that to launch the formatter server and its subprocesses.
showNotifications
[代码]
off
[/代码]
Controls when notifications are displayed by the extension. Supported values are
[代码]
off
[/代码]
,
[代码]
always
[/代码]
,
[代码]
onError
[/代码]
, and
[代码]
onWarning
[/代码]
.

Troubleshoot formatting
-----------------------
If formatting fails, check the following possible causes:

Problem
Solution
There are multiple formatters available for Python files.
Set the default formatter by following the instructions in
the section above (#_set-a-default-formatter).
No "Format Document With..." option is available.
If you don't see this option in the context menu, it's likely you don't have a formatter extension installed or enabled in VS Code. Reference the
Choose a Formatter (#_choose-a-formatter)section to see how you can install a Python formatter extension.
Custom arguments for the formatter are incorrect.
Check that the appropriate
[代码]
<formatter>.path
[/代码]
setting does not contain arguments, and that
[代码]
<formatter>.args
[/代码]
contains a list of individual top-level argument elements.
The "You have deprecated linting or formatting settings" notification is displayed.
If you are seeing this notification, it means you have settings such as
[代码]
python.linting
[/代码]
or
[代码]
python.formatting
[/代码]
in VS Code. These settings are no longer supported by the Python extension, as
linting and formatting support has been migrated to tools extensions (https://github.com/microsoft/vscode-python/wiki/Migration-to-Python-Tools-Extensions).
The
Format Selection
command fails when using Black Formatter.
[代码]
black
[/代码]
does not support formatting sections of code. To work around this limitation, you can disable format on paste and set
[代码]
formatOnSave
[/代码]
to format the whole file with the following settings:
[代码]
"[python]": {"editor.formatOnPaste": false, "editor.formatOnSaveMode": "file"}
[/代码]
.
Formatting doesn't work even though I have a formatter extension installed.
Formatting can fail for various reasons, such as syntax issues in your code, an unsupported version of Python is used, or the formatter isn't configured correctly. Check the formatter extension's Output channel to understand why the formatter has failed (run the
Output: Focus on Output
command in the Command Palette, and then select the formatter extension channel).
Note: If you don't find your preferred formatter listed above, you can add support via an extension. The Python Extension Template makes it easy to integrate new Python tools into VS Code.


Next steps
----------
• Debugging - Learn to debug Python both locally and remotely.
• Testing - Configure test environments and discover, run, and debug tests.
• Basic Editing - Learn about the powerful VS Code editor.
• Code Navigation - Move quickly through your source code.
• Python Extension Template - Create an extension to integrate your favorite linter into VS Code.
02/04/2026